// /////////////////////////////////////////////////////////////////////////////
// flatten /////////////////////////////////////////////////////////////////////
// /////////////////////////////////////////////////////////////////////////////

function flatten(subArray) {
let array = subArray.flat();
return array;
}

// /////////////////////////////////////////////////////////////////////////////
// loop ////////////////////////////////////////////////////////////////////////
// /////////////////////////////////////////////////////////////////////////////

function loop(array, test, update, body) {
//use recursion
//Base Case
  //condition
  if(!test(array)){
    return;
  }
//RECURSION
  //condition
  body(array);
  return loop(update(array), test, update, body);
}

// /////////////////////////////////////////////////////////////////////////////
// every ///////////////////////////////////////////////////////////////////////
// /////////////////////////////////////////////////////////////////////////////

function every(array, test) {
//Base Case
  //condition
  if(array.length === 0){
    return true;
  }
//RECURSION
  //condition
  if(!test(array[0])){
    return false;
  }
  return every(array.slice(1), test);
}

// /////////////////////////////////////////////////////////////////////////////
// dominantDirection ///////////////////////////////////////////////////////////
// /////////////////////////////////////////////////////////////////////////////

function dominantDirection(string) {
  const rtlRegex = /[\u0590-\u08FF]/;
  
  function countRTL(str) {
    if (str.length === 0) {
      return 0;
    }
    
    if (rtlRegex.test(str[0])) {
      return 1 + countRTL(str.slice(1));
    } else {
      return 0 + countRTL(str.slice(1));
    }
  }
  
  const rtlCount = countRTL(string);
  const ltrCount = string.length - rtlCount;
  
  if (rtlCount > ltrCount) {
    return 'rtl';
  } else {
    return 'ltr';
  }

}

// /////////////////////////////////////////////////////////////////////////////
//  //////////////////////////////////////////////////////
// /////////////////////////////////////////////////////////////////////////////

if ((typeof process !== 'undefined') &&
  (typeof process.versions.node !== 'undefined')) {
  module.exports = {
    flatten,
    loop,
    every,
    dominantDirection,
  };
};